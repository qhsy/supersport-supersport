<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<script type="text/javascript" src="js/jweixin-1.0.0.js"></script>
	<script type="text/javascript" src="js/zepto.min.js"></script>
</head>
<body>
	<button class="btn">支付</button>
	<script type="text/javascript">
		$('.btn').click(function(){
			if (typeof WeixinJSBridge == "undefined"){
				if( document.addEventListener ){
					document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
				} else if (document.attachEvent){
					document.attachEvent('WeixinJSBridgeReady', onBridgeReady); 
					document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
				}
			} else {
				onBridgeReady();
			}
		})
		function onBridgeReady(){
			$.ajax({
				url:'/api/payController/wechatH5Pay',
				type:'POST',
				contentType:'application/json',
				dataType:'json',
				async:false,
				data:'{"questionCode": "4512478","romoteIP": "string","serveIP": "string","zoo": {"key": "tesetkey","token": "acf12405a4d749f0a6512ac79a3c6b82c417f55036c84f24b833ef480b6de8e4215af695"}}',
				success:function(res){
					if(res.status == 1){
						//getBrandWCPayRequest = res.wechatH5PayInfo;
						WeixinJSBridge.invoke('getBrandWCPayRequest',res.wechatH5PayInfo,function(res){
							if(res.err_msg == "get_brand_wcpay_request：ok" ) {
								self.result.detail.listenFlag = true;
								self.result.detail.videoShow = '';
								audioPlay();
							}     
						}); 
					}
				}
			});
			
		}
	</script>
</body>
</html>