<!DOCTYPE html>
<html lang="en" id="qiaotun">
<head>
<meta charset="UTF-8">
<title>为翘而生.2016微赛美臀小姐选美大赛</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no" >
<meta name="keywords" content="为翘而生.2016微赛美臀小姐选美大赛">
<meta name="description" content="为翘而生.2016微赛美臀小姐选美大赛">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="author" content="果冻体育">
<style type="text/css">
html{font-size: 100px; font-family: 'microsoft yahei', Verdana, Arial, Helvetica, sans-serif; background: #2D2143;}
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,pre,form,fieldset,input,textarea,blockquote,p,button,header,footer,nav,section,article,aside,video,audio,figure,figcaption,hgroup{padding: 0px; margin: 0px; tap-highlight-color: rgba(0, 0, 0, 0); -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -ms-tap-highlight-color: rgba(0, 0, 0, 0); font-size: 0.14rem; line-height: 0.22rem;}
table,td,tr,th{font-size: 0.12rem;}
table{margin: 0 auto;}
img{vertical-align: top; border: 0;}
ol,ul{list-style: none;}
li{list-style-type: none;}
h1,h2,h3,h4,h5,h6{font-weight:normal; font-size: 100%;}
img{width: 100%; height: auto; vertical-align: top; }
address,caption,cite,code,dfn,em,i,b{font-weight: normal; font-style: normal;}
input,textarea,select,button{outline: none; resize: none; border: 0;}
a{-webkit-appearance: none; outline: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-touch-callout: none; text-decoration: none;}
a:hover {text-decoration: none;}
.no-data{width: 100%; height: 100%; background: url(img/no_data.png) no-repeat center 40%; background-size: 1.6rem; position: fixed;}
.load{padding: 0.2rem 0; color: #fff; text-align: center; line-height: 0.45rem;}
.load em{display: inline-block; width: 0.25rem; height: 0.25rem; margin: 0.1rem; vertical-align: top; animation: load .7s linear infinite; background: url(img/qiaotun_load.png) no-repeat left top; background-size: 0.25rem;}
.tost{width: 1.6rem; border-radius: 5px; background: rgba(0,0,0,0.7); color: #fff; text-align: center; line-height: 0.4rem; position: fixed; left: 50%; margin-left: -0.8rem; bottom: 0.3rem;}

[v-cloak] {display: none;}

.header{overflow: auto; background: url(img/qiaotun_head.jpg) no-repeat center top; background-size: cover;}
.header .title{width: 2.35rem; height: 0.89rem; margin: 0.45rem auto 0;}
.header .logo{width: 1.38rem; height: 0.23rem; margin: auto;}
.header .text{padding: 0 0.35rem; margin: 0.47rem auto 0; color: #F6F6F6; font-size: 0.12rem; line-height: 0.18rem;}
.header .help a{padding: 0 0.35rem; height: 0.14rem; color: #F8800A; font-size: 0.12rem;}
.header .help a img{width: 0.14rem; vertical-align: middle;}
.header .button{height: 0.38rem; margin: 0.12rem 0 0.1rem; text-align: center;}
.header .button a{width: 1.21rem; height: 0.38rem; display: inline-block; padding: 0 0.19rem; text-align: center; line-height: 0.38rem; color: #fff;}

/* container */
.tab-nav{margin: 0.05rem 0 0.12rem; border-bottom: #352553 1px solid; text-align: center;}
.tab-nav a{padding: 0 2px 0 0.27rem; display: inline-block; color: #fff; line-height: 0.34rem;}
.tab-nav a:nth-child(1){margin-right: 0.57rem; background: url(img/qiaotun_1_1.png) no-repeat left center; background-size: 0.19rem;}
.tab-nav a:nth-child(1).curr{color: #F8800A!important; border-bottom: #F8800A 1px solid; background: url(img/qiaotun_1_2.png) no-repeat left center; background-size: 0.19rem;}
.tab-nav a:nth-child(2){margin-left: 0.57rem; background: url(img/qiaotun_2_1.png) no-repeat left center; background-size: 0.19rem;}
.tab-nav a:nth-child(2).curr{color: #F8800A!important; border-bottom: #F8800A 1px solid; background: url(img/qiaotun_2_2.png) no-repeat left center; background-size: 0.19rem;}

.list-item{margin-bottom: 0.1rem; position: relative;}
.list-item .canvas img {transition: opacity 0.2s !important;}
.list-item .info{width: 100%; box-sizing: border-box; padding: 0.54rem 0.19rem 0.16rem; color: #fff; line-height: 0.42rem; position: absolute; bottom: 0;  background: -webkit-linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.5));  background: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.5));}
.list-item .photo{display: inline-block; vertical-align: top; width: 0.38rem; height: 0.38rem; border-radius: 50%; border: 2px solid #fff; position: relative;}
.list-item .photo img{border-radius: 50%;}
.list-item .name{padding-left: 0.09rem;}
.list-item .zan{height: 0.42rem; float: right;}
.list-item .sign{width: 0.14rem; height: 0.12rem; display: block; position: absolute; right: 0; bottom: 0; background: url(img/sign.png) no-repeat; background-size: cover;}
@media screen and (min-width:640px){
	.header, .wrap{width: 640px; margin: auto;}
}
@media screen and (max-width:320px){
	html{font-size: 85.5px;}
}
@-webkit-keyframes load{
    0%{-webkit-transform: rotate(0deg);}
    100%{-webkit-transform: rotate(360deg);}
}
@keyframes load{
    0%{transform: rotate(0deg);}
    100%{transform: rotate(360deg);}
}
</style>
</head>
<body>
<header class="header" v-cloak>
	<h1 class="title"><img src="img/qiaotun_title.png" alt=""></h1>
	<div class="logo"><img src="img/qiaotun_logo.png" alt=""></div>
	<p class="text">
	活动须知：<br>
	1、凡参赛选手，上传的翘臀照片将在「实力派」中展示，找到自己的美臀，转发集赞吧！<br>
	2、只要你是果冻体育用户，晒出你的翘臀照片，就有机会获得每日开出的奖品，照片将会在「翘丽圈」展示！</p>
	<p class="help"><a href="http://mp.weixin.qq.com/s?__biz=MzAwNzk2MjI1OA==&mid=100000235&idx=1&sn=6e4d8a230e9d780191cc7007e0a5a906&scene=20#wechat_redirect"><img src="img/qiaotun_icon.png" alt="">点击这里查看晒图方式</a></p>
	<div class="button">
		<a :href="viewer.applyUrl" v-if="viewer.applyUrl != ''"><img src="img/qiaotun_tab_2.png" alt=""></a><a href="javascript:;" ><img src="img/qiaotun_tab_1.png" alt=""></a>
	</div>
</header>
<section class="wrap" v-cloak>
	<article class="container">
		<nav class="tab-nav">
			<a href="javascript:;" class="curr" v-bind:class="{curr:currStatus == 'lap'}" @click="tab(0)">翘丽圈</a>
			<a href="javascript:;" v-bind:class="{curr:currStatus == 'power'}" @click="tab(1)">实力派</a>
		</nav>
		<ul class="data-list">
			<template v-if="viewer.buttockInfos[0].contentInfos.length">
			<li class="list-item" v-for="item in viewer.buttockInfos[0].contentInfos">
				<template v-if="item.contentType == 'dzsd4107100110030003'">
					<a href="../sportstatic/photo.html?code={{item.code}}&share=1" >
						<div class="canvas"><img src="img/lazyload.jpg" v-lazyload:opt.fadein="item.cover" alt=""></div>
						<div class="info">
							<span class="photo"><img :src="item.userBasicInfo.aboutHead" alt=""><i class="sign" v-if="item.userBasicInfo.type == 'dzsd4107100310010002'"></i></span>
							
							<em class="name">{{item.userBasicInfo.nickName}}</em>
							<em class="zan">喜欢 {{item.praiseNum}}</em>
						</div>
					</a>
				</template>
				<template v-else>
					<a href="../sportstatic/default.html?code={{item.code}}&share=1">
						<div class="canvas"><img src="img/lazyload.jpg" v-lazyload:opt.fadein="item.cover" alt=""></div>
						<div class="info">
							<span class="photo"><img :src="item.userBasicInfo.aboutHead" alt=""><i class="sign" v-if="item.userBasicInfo.type == 'dzsd4107100310010002'"></i></span>
							
							<em class="name">{{item.userBasicInfo.nickName}}</em>
							<em class="zan">喜欢 {{item.praiseNum}}</em>
						</div>
					</a>
				</template>
			</li>
			</template>
		</ul>
		<div class="load" v-if="load">
			<em></em>数据加载中...
		</div>
	</article>
</section>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/vue.min.js"></script>
<script type="text/javascript" src="js/vue.lazyimg.js"></script>
<script>
Vue.use(Vue.lazyimg,{
    fade: true,
    nohori: false,
    speed: 20,
});
var vm = new Vue({
	el:'#qiaotun',
	data:{
		branches: ['lap','power'],
		currStatus: 'lap',
		powerPage: 1,
		lapPage: 1,
		bLoad: true,
		load:true,
		viewer: null
	},
	created:function(){
		this.fetchData();
	},
	watch:{
		currStatus:'fetchData'
	},
	methods:{
		fetchData:function(){
			var self = this;
			$.ajax({
				url:'/api/buttock/buttockInfo',
				type:'POST',
				data:'{"pagination":' + self.powerPage + ',"type": "' + self.currStatus+ '","width":0,"zoo":{"key":"tesetkey","token": ""}}',
				contentType:'application/json',
				dataType:'json',
				success:function(result){
					if(result.status == 1) {
						self.viewer = result;
						self.bLoad = result.buttockInfos[0].nextflag;
						self.load = false;
					}
				}
			});
		},
		tab:function(index){
			var self = this;
			self.viewer = null;
			self.load = true;
			self.currStatus = self.branches[index];
		}
	}
});
vm.$on('iscroll',function(){
	var self = this;
	var data = self.viewer;
	$(window).on('scroll',function(){
		var iHeight = $('body').height() + 10;
		var winHeight = $(window).height();
		var scrollHeight = $(window).scrollTop();
		if(iHeight ==  (winHeight + scrollHeight)){
			if(self.bLoad){
				self.bLoad = false;
				var page = self.currStatus == 'power'?(++self.powerPage):(++self.lapPage);
				$.ajax({
					url:'/api/buttock/buttockInfo',
					type:'POST',
					data:'{"pagination":' + page + ',"type": "' + self.currStatus+ '","width":0,"zoo":{"key":"tesetkey","token": ""}}',
					contentType:'application/json',
					dataType:'json',
					before:function(){
						self.load = true;
					},
					success:function(result){
						self.load = false;
						if(result.status == 1){
							if(result.buttockInfos[0].contentInfos.length){
								$.each(result.buttockInfos[0].contentInfos,function(index, item){
									self.viewer.buttockInfos[0].contentInfos.push(item);
								});
								self.bLoad = result.buttockInfos[0].nextflag;
							}
						}else{
							alert(result.error);
						}
					}
				});
			} else {
				if(!$('.tost').length){
					var ele = $('<div class="tost">没有更多数据了</div>');
					ele.appendTo('body');
					setTimeout(function(){
						$('.tost').remove();
					}, 800)
				}
			}
		}
		
	});
})
vm.$emit('iscroll');
function onTopicCategories(author,aboutHead,contentCode,contenttype){
	javascript:android.onTopicCategories(author,aboutHead,contentCode,contenttype);
}
function onBlueprint(){
	javascript:android.onBlueprint()
}
</script>
</body>
</html>