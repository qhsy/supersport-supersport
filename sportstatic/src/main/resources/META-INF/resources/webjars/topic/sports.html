<!DOCTYPE html>
<html lang="en" id="sports">
<head>
<meta charset="UTF-8">
<title>运动时刻</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no" >
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="author" content="果冻体育">
<link rel="stylesheet" href="css/base.css">
<style type="text/css">
html{background: #f0f0f0;}
/**/
.sports-header{font-size: 0.18rem; line-height: 0.24rem; color: #FFFFFF; position: relative;}
.sports-space{margin-top: 0.6rem;}
.sports-desc{background: #fff; padding: 0.16rem 0.45rem 0.19rem; font-size: 0.13rem; line-height: 0.15rem; color: #000000;}
.sports-con:last-child{padding-bottom: 0.5rem;}
.sports-con .sports-title{color: #4A4A4A; padding: 0.14rem 0 0.14rem 0.15rem; font-size: 0.12rem; font-weight: 700; line-height: 0.14rem;}
.sports-con .sports-title:after{content: ""; width: 2px; height: 0.12rem; float: left; margin: 1px 0.02rem 0 0; background: #F8800A;}
.sports-con .sports-list{display: -webkit-flex; display: flex; -webkit-flex-wrap:wrap; flex-wrap:wrap;}
.sports-con .sport{width: 50%; padding: 0 4px; margin-bottom: 4px; box-sizing: border-box; -webkit-box-sizing: border-box; border-radius: 2px; -webkit-border-radius: 2px; overflow: hidden; box-shadow: 0 1px 3px #D6D6D6;}
.sports-con .title{padding: 0.08rem 0.09rem; 0.07rem; line-height: 0.14rem; font-size: 0.12rem;}
.sports-con .user{margin-left: 0.09rem; padding: 0.05rem 0.08rem 0.05rem 0; border-top: #F0F0F0 1px solid; font-size: 0.12rem; line-height: 0.18rem;}
.sports-con .show{display: none;}
.sports-con .user img{width: 0.18rem; height: 0.18rem; border-radius: 50%; margin-right: 0.07rem;}
.sports-con .photo{font-weight: 700; color: #4A4A4A;}
.sports-con .zan{float: right; color: #9B9B9B;}
.sports-con .sport a{display: block; color: #4A4A4A; background: #fff;}
.sports-con .canvas img {transition: opacity 0.2s !important;}
.sports-con .sport-event{display: block; width: 1rem; height: 0.3rem; margin: 0.2rem auto 0.08rem; border-radius: 4px; border: #C6C6C6 1px solid; font-size: 0.12rem; color: #9F9F9F; text-align: center; line-height: 0.3rem; position: relative;}
.sports-con .sport-event:before{content: ""; width: 0.08rem; height: 0.03rem; display: block; background: url(img/sport_event.png) no-repeat; background-size: 0.08rem; position: absolute; right: 0.16rem; top: 0.13rem;}
.sports-con .sport-event.down:before{background-position: 0 -0.03rem;}
.sports-con .sport-event.up:before{background-position: 0 0;}
</style>
</head>
<body>
<section class="container" v-cloak>
	<header class="open-app" v-if="isShare">
		<span class="app-logo"><img src="img/about.png"></span>
		<a href="javascript:;" class="app-btn" @click="open">打开App</a>
	</header>
	<header class="sports-header" :class="{'sports-space':isShare}"><img :src="result.cover" alt=""></header>
	<p class="sports-desc">{{result.aboutDesc}}</p>
	<article class="sports-con" v-for="model in result.models">
		<h1 class="sports-title">{{model.title}}</h1>
		<ul class="sports-list">
			<li class="sport" v-for="info in model.infos" :class="{show:$index >=4}">
				<template v-if="info.contentType == 'dzsd4107100110030003'">
					<a href="../sportstatic/photo.html?code={{info.code}}">
						<div class="canvas"><img src="img/lazyload.jpg" v-lazyload:opt.fadein="info.cover" :alt="info.title"></div>
						<h1 class="title">{{info.title}}</h1>
						<div class="user"><span class="photo"><img :src="info.userBasicInfo.aboutHead" :alt="{{info.userBasicInfo.nickName}}">{{info.userBasicInfo.nickName}}</span><em class="zan">喜欢 {{info.praiseNum}}</em></div>
					</a>
				</template>
				<template v-else>
					<a href="../sportstatic/default.html?code={{info.code}}">
						<div class="canvas"><img src="img/lazyload.jpg" v-lazyload:opt.fadein="info.cover" :alt="info.title"></div>
						<h1 class="title">{{info.title}}</h1>
						<div class="user"><span class="photo"><img :src="info.userBasicInfo.aboutHead" :alt="{{info.userBasicInfo.nickName}}">{{info.userBasicInfo.nickName}}</span><em class="zan">喜欢 {{info.praiseNum}}</em></div>
					</a>
				</template>
			</li>
		</ul>
		<template v-if="model.infos.length > num">
			<a href="javascript:;" class="sport-event up">展开更多</a>
			<!-- <a href="javascript:;" class="sport-event down">收起</a> -->
		</template>
	</article>
</section>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/vue.min.js"></script>
<script type="text/javascript" src="js/vue.lazyimg.js"></script>
<script type="text/javascript" src="js/share.js"></script>
<script type="text/javascript">
	var common = {
		formatUrl : function (arg){
			var url = window.location.search;
			if(typeof url != 'string' || url == '') return;
			var newUrl = url.substr(1);
			var urlArr = newUrl.split('&');
			for(var i=0; i<urlArr.length; i++){
				var arr = urlArr[i].split('=');
				for(j=0; j<arr.length; j++){
					if(arg == arr[0]){
						return arr[1]
					}
				}
			}
		}
	}
	var id = common.formatUrl('id');
	var isShare = common.formatUrl('share');
	Vue.use(Vue.lazyimg,{
	    fade: true,
	    nohori: true,
	    speed: 20
	});
	var vm = new Vue({
		el:'#sports',
		data:{
			result: null,
			isDown:true,
			num:4,
			isShare: false
		},
		init:function(){
			var self = this;
			$.ajax({
				url:'/api/contentController/themePage',
				type:'POST',
				data:'{"code": "' + id + '","zoo": {"key": "tesetkey","token": " "}}',
				contentType:'application/json',
				dataType:'json',
				success:function(data){
					if(data.status == 1) {
						self.result = data;
					}
				}
			});
		},
		methods:{
			toggle:function(index){
				this.isDown = !this.isDown;
				if(this.isDown){
					$('.sports-list').eq(index).find('.show').removeAttr('style');
				}else{
					$('.sports-list').eq(index).find('.show').css('display','block');
				}
				
			}
		}
	});
	if(isShare){
		vm.isShare = true;
	}
	$('.sport-event').live('click',function(){
		var index = $('.sport-event').index($(this));
		if($(this).hasClass('up')){
			$(this).removeClass('up').addClass('down').text('收起');
			$('.sports-list').eq(index).find('.show').css('display','block');
			
		}else{
			$(this).removeClass('down').addClass('up').text('展开更多');
			$('.sports-list').eq(index).find('.show').removeAttr('style');
		}
	})
</script>
</body>
</html>