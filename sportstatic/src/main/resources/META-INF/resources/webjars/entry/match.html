<!DOCTYPE html>
<html class="match" lang="en">
<head>
<meta charset="UTF-8">
<title v-text="matchInfo.matchInfo.name"></title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no,email=no"> 
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes"> 
<meta name="App-Config" content="fullscreen=yes,useHistoryState=yes,transition=yes"/>
<meta name="author" content="">
<style type="text/css">
html{font-size: 100px; font-family: "PingFangSC-Regular", Verdana, Arial, Helvetica, Helvetica Neue, sans-serif;}
body{padding: 0; margin: 0;}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,pre,form,fieldset,input,textarea,blockquote,p,button,header,footer,nav,section,article,aside,video,audio,figure,figcaption,hgroup{padding: 0px; margin: 0px; tap-highlight-color: rgba(0, 0, 0, 0); -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -ms-tap-highlight-color: rgba(0, 0, 0, 0); font-size: 0.14rem;}
table,td,tr,th{font-size: 0.12rem;}
table{margin: 0 auto;}
ol,ul{list-style: none;}
li{list-style-type: none;}
h1,h2,h3,h4,h5,h6{font-weight:normal;}
img{width: 100%; height:auto; vertical-align: top; border: 0;}
address,caption,cite,code,dfn,em,i,b{font-weight: normal; font-style: normal;}
input,textarea,select,button{outline: none; resize: none; border: 0;}
a{-webkit-appearance: none; outline: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); -webkit-touch-callout: none; text-decoration: none;}
a:hover {text-decoration: none; }
[v-cloak]{display: none;}.f12{font-size: 0.12rem;}.f14{font-size: 0.14rem;}.f16{font-size: 0.16rem;}.f18{font-size: 0.18rem;}
.tl{text-align: left;}.tr{text-align: right;}.tc{text-align: center;}.fl{float: left;}.fr{float: right;}.pos-r{position: relative;}.pos-f{position: fixed;}

/* Style */
.next-btn{width: 100%; height: 0.55rem; position: fixed; left: 0; bottom: 0; background: #F8800A; color: #fff; text-align: center; font-size: 0.2rem; line-height: 0.55rem;}
</style>
</head>
<body>
<header class="head">
	<img :src="matchInfo.matchInfo.cover" alt="">
</header>
<section class="info">
	<h1 class="title">{{matchInfo.matchInfo.name}}</h1>
	<h2 class="user">{{matchInfo.matchInfo.UserBasicInfo.nickName}}</h2>
</section>
<section class="con">
	
</section>
<a href="javascript:;" class="next-btn" @click="callBackNext">我要报名</a>
<script type="text/javascript" src="js/common.min.js"></script>
<script type="text/javascript" src="../static/js/jweixin-1.0.0.js"></script>
<script type="text/javascript" src="../static/js/wxConfig.js"></script>
<script>
new Vue({
	el: '.match',
	data: {
		matchInfo: null,
		wechat: navigator.userAgent.indexOf('MicroMessenger') > -1?true:false,
		wechatToken: sessionStorage.getItem('token')?sessionStorage.getItem('token'):''
	},
	created: function(){
		this.apiShareMatchInfo();
		this.apiShareContent();
	},
	methods: {
		apiShareMatchInfo: function(){
			var _this = this;
			$.ajax({
				url:'/api/matchController/shareMatchInfo',
				type:'POST',
				contentType:'application/json',
				dataType: 'json',
				data:'{"matchCode": "' + queryUrl('id') + '","zoo": {"key": "tesetkey","token": ""}}',
				success:function(resp){
					if(res.status == 1){
						_this.matchInfo = resp;
					}else{
						alert(resp.error);
					}
				}
			});
		},
		apiShareContent: function(){
			$.ajax({
				url:'api/matchController/shareMatchInfo',
				type:'POST',
				contentType:'application/json',
				dataType: 'json',
				data:'{"matchCode": "' + queryUrl('id') + '","zoo": {"key": "tesetkey","token": ""}}',
				success:function(resp){
					if(res.status == 1){
						wxConfigFun({
							share: false,
							imgUrl: resp.iconUrl,
							title: resp.title,
							link: resp.url,
							desc: resp.content
						});
					}else{
						alert(resp.error);
					}
				}
			});
		},
		callBackNext: function(){
			if(wechat){
				if(){
					window.location.href = 'match_list.html?id=' +  + '&source=wechat&token=' + this.wechatToken;
				} else {
					window.location.href = 'entry.html?code=' +  + '&source=wechat&entryToken=' + this.wechatToken;
				}
			} else {
				open();
			}
		}
	}
});
</script>
</body>
</html>