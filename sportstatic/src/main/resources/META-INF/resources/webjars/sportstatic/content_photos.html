<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>详情</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no" >
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="author" content="">
<link rel="stylesheet" type="text/css" href="../static/css/base.css">
<style type="text/css">
.container{padding-bottom: 0.5rem;}
/* content */
.content .address, .content .tag{padding: 0 0.16rem;}
.content{color: #4A4A4A!important;}
.content .title{padding: 0.24rem 0.16rem 0.05rem; line-height: 0.24rem; font-size: 0.2rem; font-weight: 700;}
.content .name{padding: 0 0.16rem; line-height: 0.20rem;}
.content .name em{color: #9F9F9F; font-size: 0.12rem; padding-left: 0.15rem;}
.content .address{font-size: 0.12rem; color: #9F9F9F;}
.content .address:after{content: ""; float: left; width: 0.08rem; height: 0.1rem; margin: 0.03rem 0.05rem 0 1px; background: url(css/img/icon.png) no-repeat -0.05rem -0.12rem; background-size: 0.17rem;}
.content .list{padding: 0 0.13rem;}
.content .list img{border-radius: 5px; display: block; margin: auto;}
.content .list li{margin-top: 0.22rem;}
.content .info{padding-top: 0.1rem;}
.content .num{float: left; font-family: "PingFangSC-Light"; color: #000; font-size: 0.12rem; line-height: 0.20rem;}
.content .text{padding-left: 1.04rem; font-size: 0.12rem; line-height: 0.20rem; color: #7F7F7F; text-align: justify; word-wrap: break-word; word-break: break-all;}
.content .tag{padding: 0.36rem 0.22rem 0.46rem;}
.content .tag li{border: #757575 1px solid; display: inline-block; border-radius: 4px; margin: 0 0.08rem 0.1rem 0; padding: 0 0.09rem; font-size: 0.12rem; line-height: 0.18rem;}
.content .caption{padding: 0.36rem 0.22rem 0.1rem; line-height: 0.2rem; text-align: justify;}
.content .cover{text-align: center;}
/*follow*/
.follow{text-align: center;}
.follow .head{width: 0.52rem; height: 0.52rem; margin: auto; position: relative;}
.follow .head img{border-radius: 50%; width: 100%; height: 100%;}
.follow .name{padding: 0.1rem 0 0; font-size: 0.13rem; color: #212121; line-height: 0.2rem;}
.follow .title{padding-bottom: 0.13rem; color: #BDBDBD; font-size: 0.12rem; line-height: 0.2rem;}
.follow .submit{width: 1.1rem; border: #F8800A 1px solid; display: block; margin: auto; border-radius: 1.2rem; font-size: 0.12rem; line-height: 0.27rem; color: #F8800A;}
.follow .vip{width: 0.15rem; height: 0.15rem; background: url(../static/img/icon_markbig.png) left top; background-size: cover; position: absolute; right: 0; bottom: 0;}
/*shop*/
.shop{padding: 0.24rem 0.12rem 0;}
.shop a{color: #343434;}
.shop .title{color: #212121; line-height: 0.2rem;}
.shop .item{height: 1rem; padding: 0.12rem 0; border-bottom: #F0F0F0 1px solid;}
.shop .item:last-child{border-bottom: 0;}
.shop .list-img{width: 1rem; height: 1rem; margin-right: 0.24rem; float: left;}
.shop .list-img img{width: 100%; height: 100%;}
.shop .name{color: #343434; line-height: 0.2rem;}
.shop .price{float: left; padding-top: 0.3rem; color: #FF7E00; font-size: 0.12rem;}
.shop .price em{font-size: 0.2rem; line-height: 0.3rem;}
.shop .btn{width: 0.6rem; height: 0.24rem; margin: 0.33rem 0 0; background: #FF7E00; color: #fff; text-align: center; line-height: 0.24rem; float: right; font-size: 0.12rem;}
/*canvas*/
.slider{display: none;}
.canvas{height: 100%; width: 100%; overflow: hidden; position: fixed; left: 0; top: 0; background:rgba(0,0,0,0.7);}
.canvas ul,.canvas li{height: 100%; overflow: hidden;}
.canvas li{position: absolute; display: -webkit-box; -webkit-box-pack: center; -webkit-box-align: center;}
.close{width: 40px; height: 40px; position: fixed; right: 15px; top: 15px; background: url(../static/img/back_but@2x.png) no-repeat center center; background-size: 25px; z-index: 999;}
</style>
</head>
<body>
<section class="container" v-cloak>
	<article class="content">
		<div class="cover"><img :src="res.contentBasicInfo.cover" :data-src="res.contentBasicInfo.cover" alt=""></div>
		<div class="title">{{res.contentBasicInfo.title}}</div>
		<div class="name">by {{res.contentBasicInfo.userBasicInfo.nickName}}<em>{{res.contentBasicInfo.publishTimeStr}}</em></div>
		<div class="address" v-if="res.contentBasicInfo.localtionName">{{res.contentBasicInfo.localtionName}}</div>
		<ul class="list">
			<li v-for="photo in res.contentPhotosDetails" track-by="$index">
				<div class="photo"><img src="../static/img/lazyload.jpg" :data-src="photo.thumb.thumbUrl" v-lazyload="photo.thumb.thumbUrl" alt=""></div>
				<div class="info">
					<em class="num">{{$index+1}}/{{res.contentPhotosDetails.length}}</em>
					<p class="text">{{photo.content}}</p>
				</div>
			</li>
		</ul>
		<ul class="tag">
			<li v-for="tag in res.contentBasicInfo.tags">{{tag.name}}</li>
		</ul>
	</article>
	<footer class="follow">
		<div class="head" @click="openApp"><img :src="res.contentBasicInfo.userBasicInfo.aboutHead?res.contentBasicInfo.userBasicInfo.aboutHead:'../static/img/default_photo.png'" alt=""><em class="vip" v-if="res.contentBasicInfo.userBasicInfo.type == 'dzsd4107100310010002'"></em></div>
		<h1 class="name">{{res.contentBasicInfo.userBasicInfo.nickName}}</h1>
		<h2 class="title">{{res.contentBasicInfo.userBasicInfo.title}}</h2>
		<a href="javascript:;" class="submit" @click="openApp">进入TA的主页</a>
	</footer>
	<!-- shop module -->
	<article class="shop" v-if="shopList.length">
		<h3 class="title">相关装备</h3>
		<ul class="list">
			<li class="item clearfix" v-for="item in shopList">
				<a :href="item.iosUrl">
					<div class="list-img">
						<img src="../static/img/lazyload.jpg" v-lazyload="item.picurl" alt="">
					</div>
					<div class="list-info">
						<h1 class="name">{{item.name}}</h1>
						<span class="price">￥<em>{{item.price}}</em></span>
						<em class="btn">去购买</em>
					</div>
				</a>
			</li>
		</ul>
	</article>
	<!-- end -->
	<aside class="loading" transition="fade" v-if="loading"><em><img src="../static/img/doing.gif">数据加载中...</em></aside>
</section>
<!-- <section class="slider">
	<span class="close"></span>
	<div class="canvas"></div>
</section> -->
<script type="text/javascript" src="../static/js/lib/vue.min.js"></script>
<script type="text/javascript" src="../static/js/tools.js"></script>
<script type="text/javascript" src="../static/js/share.js"></script>
<script type="text/javascript" src="../static/js/vue.lazyimg.js"></script>
<script type="text/javascript" src="../static/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
Vue.use(Vue.lazyimg,{
	nohori: true
});
new Vue({
	el:'.container',
	data:{
		res: null,
		share:queryUrl('share'),
		loading: true,
		shopList: []
	},
	created:function(){
		this.reqwest();
		if(this.share){
			share();
		}
	},
	methods:{
		reqwest:function(){
			var _this = this;
			reqwest({
				url: '/api/contentController/contentPhotosDetail',
				method: 'post',
				data: '{"content_code": "' + queryUrl('code') + '", "zoo": {"key": "tesetkey","token": ""}}',
				type: 'json',
				contentType: 'application/json',
				success: function(resp) {
					if(resp.status == 1){
						_this.loading = false;
						_this.res = resp;
					}
				}
			});
			reqwest({
				url: '/api/userController/shareContent',
				method: 'post',
				data: '{"contentCode": "' + queryUrl('code') + '","zoo": {"key": "tesetkey","token": " "}}',
				type: 'json',
				contentType: 'application/json',
				success: function(resp) {
					if(resp.status == 1){
						shareWeiXin({
							'url':'/api/wechatController/configInfo',
							'imgUrl':resp.iconUrl,
							'title':resp.title,
							'link':window.location.href,
							'desc':resp.content
						});
					}
				}
			});
			reqwest({
				url: '/api/contentController/contentDetailProducts',
				method: 'post',
				data: '{"code": "' + queryUrl('code') + '","zoo": {"key": "tesetkey","token": " "}}',
				type: 'json',
				contentType: 'application/json',
				success: function(resp) {
					if(resp.status == 1){
						_this.shopList = resp.productInfos;
					}else{
						
					}
				}
			});
			reqwest({
				url: '/api/contentController/contentReadCount',
				method: 'post',
				data: '{"code": "' + queryUrl('code') + '","zoo": {"key": "tesetkey","token": " "}}',
				type: 'json',
				contentType: 'application/json',
				success: function(resp) {}
			});
		},
		openApp:function(){
			open();
		}
	}
});
// window.onload = function(){
// 	var oSlider= document.querySelector('.slider');
// 	var oWrap = document.querySelector('.content');
// 	var aImg = oWrap.querySelectorAll('img');
// 	var oCanvas = oSlider.querySelector('.canvas');
// 	var oClose = oSlider.querySelector('.close');
// 	var list = [];
// 	var timer = null;
// 	for(var i=0; i<aImg.length; i++){
// 		aImg[i].index = i;
// 		aImg[i].addEventListener('click', function(){
// 			oSlider.style.display ='block';
// 			list = [];
// 			for(var j=0; j<aImg.length; j++){
// 				var item = {
// 					'width':aImg[j].naturalWidth,
// 					'height':aImg[j].naturalHeight,
// 					'img':aImg[j].getAttribute('data-src')
// 				}
// 				list.push(item);
// 			}
// 			console.log(list)
// 			new Slider({
// 				dom : document.querySelector('.canvas'),
// 				list : list,
// 				index : this.index
// 			});
// 		}, false);
// 	}
// 	oClose.addEventListener('click', function(){
// 		oSlider.style.display = 'none';
// 		oCanvas.removeChild(oCanvas.querySelector('ul'))
// 	}, false);

// }
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260476594'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1260476594' type='text/javascript'%3E%3C/script%3E"));</script>
</body>
</html>